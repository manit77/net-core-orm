@using CoreORM
@model DBDatabase
import { Database } from "../database/database.js";
import * as schema from "./_schema.js";
import { MySQLCollections } from "../database/mysql_collections.js";
import { DBResult, DBSaveConfig } from "../database/models.js";

@foreach(var table in Model.Tables) {

@: export class @(table.Name)Collection extends MySQLCollections@(Html.Raw("<"))schema.M@(table.Name)> {
@:     s = schema.@(table.Name)Schema;
@:     f = schema.@(table.Name)Fields;    
@:     constructor(db: Database) { 
@:      super(db, schema.@(table.Name)Schema);
@:     }
@:    override async Fill(model:any, fields: string[] | schema.@(table.Name)Fields[] | schema.M@(table.Name), pkeys: schema.I@(table.Name)PKeys): Promise@(Html.Raw("<"))DBResult> {
@:        return await super.Fill(model, fields, pkeys);
@:    }
@:    override async Get(fields: string[] | schema.@(table.Name)Fields[] | schema.M@(table.Name), pkeys: schema.I@(table.Name)PKeys): Promise@(Html.Raw("<"))schema.M@(table.Name)> {
@:        return await super.Get(fields, pkeys);
@:    }
@:    override async Save(model: schema.M@(table.Name), config?: DBSaveConfig): Promise@(Html.Raw("<"))DBResult> {
@:        return await super.Save(model, config);
@:    }
@:    override async Where(fields: string[] | schema.@(table.Name)Fields[] | schema.M@(table.Name), where: schema.M@(table.Name)): Promise@(Html.Raw("<"))schema.M@(table.Name)[]> {
@:        return await super.Where(fields, where);        
@:    }
@:    override async Delete(pkeys: schema.I@(table.Name)PKeys, config?: DBSaveConfig): Promise@(Html.Raw("<"))DBResult> {
@:        return await super.Delete(pkeys, config);
@:    }
@: }

}